- name: Create local working dir
  hosts: localhost
  roles:
    - provision/local
  tags:
    - provision

- name: Random select a storage host
  hosts: localhost
  connection: local
  gather_facts: false
  tasks:
    - set_fact:
        random_host: "{{ groups['storage'] | random }}"

- name: Run fault drills on storage nodes in the system level
  hosts: "{{ hostvars['localhost']['random_host'] }}"
  roles:
    - storage/system
